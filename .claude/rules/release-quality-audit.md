# リリース品質監査ルール

## 概要
GitHub Releasesやストアへの公開前に、必ず品質監査を実施すること。
監査なしでのリリースは許容されない。

## リリース前品質監査チェックリスト

### 1. ビルド品質

#### コンパイル・ビルド
- [ ] `cargo build --release` または `npm run build` が警告0で成功
- [ ] `cargo clippy` / `eslint` が警告0
- [ ] `cargo fmt --check` / `prettier --check` がパス

#### テスト
- [ ] ユニットテスト全件PASS
- [ ] 統合テスト全件PASS（存在する場合）
- [ ] カバレッジが基準を満たす（推奨: 70%以上）

### 2. セキュリティ監査

#### 依存関係
```bash
# Rust
cargo audit

# Node.js
npm audit
```
- [ ] 重大な脆弱性（Critical/High）が0件
- [ ] 中程度の脆弱性（Medium）を把握・対処済み

#### コード品質
- [ ] ハードコードされた認証情報がない
- [ ] SQLインジェクション対策
- [ ] XSS対策（Web/フロントエンド）
- [ ] 入力バリデーション実装

### 3. 機能テスト（手動）

#### 基本動作
- [ ] アプリが正常に起動する
- [ ] 主要機能が動作する
- [ ] エラー時に適切なメッセージが表示される

#### インストーラー
- [ ] インストールが正常に完了する
- [ ] アンインストールが正常に完了する
- [ ] インストール後にアプリが起動する

#### 環境テスト
- [ ] Windows 10で動作確認
- [ ] Windows 11で動作確認
- [ ] 管理者権限なしで動作する（必要な場合を除く）

### 4. UI/UX確認

- [ ] 全画面が正常に表示される
- [ ] ダークモード/ライトモード両方で確認
- [ ] レスポンシブ対応（該当する場合）
- [ ] 多言語切替が動作する（実装済みの場合）

### 5. ドキュメント

- [ ] README.mdが最新
- [ ] インストール手順が記載
- [ ] 使用方法が記載
- [ ] ライセンス表記

### 6. 法務・コンプライアンス

- [ ] OSSライセンスの適切な表記
- [ ] サードパーティライブラリのライセンス確認
- [ ] Privacy Policy（個人情報を扱う場合）
- [ ] Terms of Service（商用の場合）

---

## 監査実行コマンド例

### Rust + Tauri プロジェクト
```bash
# ビルド確認
cargo build --release 2>&1 | grep -E "(warning|error)" | wc -l
# 0であること

# Clippy
cargo clippy -- -D warnings

# テスト
cargo test

# セキュリティ監査
cargo audit

# フォーマット
cargo fmt --check
```

### Node.js プロジェクト
```bash
# ビルド
npm run build

# Lint
npm run lint

# テスト
npm test

# セキュリティ監査
npm audit
```

---

## 監査結果の記録

STATUS.mdに以下の形式で記録すること:

```markdown
## リリース前品質監査（v{VERSION}）

| 項目 | 結果 | 備考 |
|------|------|------|
| ビルド | ✅ PASS | 警告0 |
| Clippy/Lint | ✅ PASS | 警告0 |
| テスト | ✅ PASS | 10/10 |
| セキュリティ監査 | ✅ PASS | 脆弱性0 |
| 手動テスト | ✅ PASS | Win10/11確認 |
| ドキュメント | ✅ PASS | README更新済み |

監査日: 2026-01-18
監査者: AI (Orchestrator)
```

---

## 監査なしリリースの禁止

以下の場合、リリースを**禁止**する:

1. ビルドに警告がある状態
2. テストが失敗している状態
3. 重大なセキュリティ脆弱性がある状態
4. 手動テストを実施していない状態
5. 監査結果をSTATUS.mdに記録していない状態

---

## 変更履歴

| 日付 | 内容 |
|------|------|
| 2026-01-18 | 初版作成（SecureBackup監査不足問題を受けて） |
